{% extends "base.html" %}
{% block title %}Upload - JN Records{% endblock %}
{% block content %}

<div style="position: fixed; top: 10px; left: 10px; z-index: 999;">
    <a href="{{ url_for('routes.dashboard') }}"
        style="top: 15px; left: 15px; z-index: 1000;
          background-color: white;
          border: 2px solid black;
          border-radius: 50%;
          width: 40px;
          height: 40px;
          display: flex;
          align-items: center;
          justify-content: center;
          text-decoration: none;
          color: black;"
    title="Return to Dashboard">
    <i class="fas fa-house"></i>
    </a>
  </div>

  <div class="container d-flex flex-column align-items-center" style="padding-top: 80px;">
    <h2 class="mb-2">Upload Document</h2>
    <p class="text-muted mb-4">Upload documents you want to share with the database</p>
  
    <div id="dropzone" class="upload-box text-center" onclick="fileInput.click();">
        <p class="mb-1">Drag & drop your file here</p>
        <p class="text-muted small">Accepted: PDF, DOCX</p>
        <button type="button" class="btn btn-outline-dark mt-2" onclick="document.getElementById('fileInput').click();">Browse Files</button>
    </div>

    <div id="fileNameDisplay" class="mt-3 text-muted" style="font-size: 14px;"></div>

    
      <form method="POST" action="{{ url_for('routes.upload') }}" enctype="multipart/form-data" class="mt-3">
        <input type="file" name="contract_file" accept=".pdf,.docx" id="fileInput" hidden required>
        <button type="submit" class="btn btn-primary">Upload</button>
      </form>
    </div>


    <script>
        const dropzone = document.getElementById('dropzone');
        const fileInput = document.getElementById('fileInput');
        const fileNameDisplay = document.getElementById('fileNameDisplay');
        
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(event => {
            window.addEventListener(event, e => {
                e.preventDefault();
                e.stopPropagation();
            });
        });
        
        dropzone.addEventListener('dragover', () => {
            dropzone.style.backgroundColor = '#f0f0f0';
        });
        
        dropzone.addEventListener('dragleave', () => {
            dropzone.style.backgroundColor = '#fafafa';
        });
        
        dropzone.addEventListener('drop', (e) => {
            dropzone.style.backgroundColor = '#fafafa';
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                const dataTransfer = new DataTransfer();
                dataTransfer.items.add(files[0]);
                fileInput.files = dataTransfer.files;
        
                fileNameDisplay.innerText = `Selected file: ${files[0].name}`;
            }
        });
        
        fileInput.addEventListener('change', () => {
            if (fileInput.files.length > 0) {
                fileNameDisplay.innerText = `Selected file: ${fileInput.files[0].name}`;
            }
        });
        </script>
        

{% endblock %}


  
